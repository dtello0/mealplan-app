<div class="container2">
  <div class="banner">
    <h1>Welcome to Your Fitness Journey</h1>
    <div class="info-box">
      <div class="info-item">
        <p>Weight: <%= @user_last_goal.weight_in_kg %> kg</p>
      </div>
      <div class="info-item">
        <p>Calorie Objective: <%= @user_last_goal.calorie_objective %></p>
      </div>
      <div class="info-item">
        <p>Protein Objective: <%= @user_last_goal.protein_objective %> g</p>
      </div>
      <div class="info-item">
        <p>Carbs Objective: <%= @user_last_goal.carbs_objective %> g</p>
      </div>
      <div class="info-item">
        <p>Fat Objective: <%= @user_last_goal.fat_objective %> g</p>
      </div>
    </div>
  </div>
  
  <div class="sidebar">
    <h2>Views</h2>
    <ul>
      <li><a href="#">Meal Plan</a></li>
      <li><a href="#">Shopping List</a></li>
    </ul>
  </div>
  
  <div class="main-body">
    <h2>Meal Plan for Today</h2>
    <a href="/generate_mealplan">Create plan for today</a>
    <% @meal_plan %>
    <ul class="meal-list">
      
      <% @meals = JSON.parse(@the_mealplan.content).keys.first(5) %>

      <% @meals.each do |key| %>
      
      <li>
      <%= key %>
      </li>

        <%= food_item = JSON.parse(@the_mealplan.content).fetch(key).fetch("food_item") %>
        <% ingredients = JSON.parse(@the_mealplan.content).fetch(key).fetch("ingredients") %>

        <% ingredients.each do |ingredient| %>
      
          <li>
            <input type="checkbox" id="ingredient-<%= ingredient %>">
            <label for="ingredient-<%= ingredient %>"><%= ingredient %></label>
          </li>

        <% end %>
      
      <% end %>

    </ul>
  </div>
</div>


<hr>


<div>
  <div>
    <h2>
      Edit mealplan
    </h2>

    <form action="/modify_mealplan/<%= @the_mealplan.id %>"  method="post" >
      <div>
        <label for="user_id_box">
          User
        </label>

        <input type="text" id="user_id_box" name="query_user_id" value="<%= @the_mealplan.user_id %>">
      </div>

      <div>
        <label for="content_box">
          Content
        </label>

        <input type="text" id="content_box" name="query_content" value="<%= @the_mealplan.content %>">
      </div>

      <button>
        Update mealplan
      </button>
    </form>
  </div>
</div>

<hr>
